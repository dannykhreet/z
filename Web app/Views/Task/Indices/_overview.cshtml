@model WebApp.ViewModels.TaskViewModel
@{
    Layout = null;
}

<div class="row no-gutters" id="contentCol">
    <!--
            <div data-container="template" style="background-color:green; width: 100%;height:200px;margin:5px;">Tada 1</div>
    <div data-container="template" style="background-color:yellow; width: 100%;height:200px;margin:5px;">Tada 2</div>
    <div data-container="template" style="background-color:purple; width: 100%;height:200px;margin:5px;">Tada 3</div>
    -->


    @if (Model.TaskTemplates.Count != 0)
    {
        @foreach (WebApp.Models.Task.TaskTemplateModel taskTemplate in Model.TaskTemplates)
        {

            var id = taskTemplate.Id;
            var areaPathIds = taskTemplate.AreaPathIds.Replace(" -> ", ",");
            var recurrence = taskTemplate.RecurrencyType;


            <div class="card w-100 results noselect" data-container="template" data-id="@id"
                    data-role="@taskTemplate.Role"
                    data-pathids="@areaPathIds"
                    data-recurrence="@recurrence"
                    data-index="@taskTemplate.Index"
                    data-ischanged="false">

                <div class="card-body p-0">
                    @{
                        //var picture = string.Format(WebApp.Logic.Constants.General.GetMediaUrl(Model.Picture));
                        var picture = WebApp.Helpers.MediaHelpers.GetMediaImageUrl(Model.ApplicationSettings, taskTemplate.Picture);
                        if (string.IsNullOrEmpty(taskTemplate.Picture))
                        {
                            if (!string.IsNullOrEmpty(taskTemplate.VideoThumbnail))
                            {
                                picture = WebApp.Helpers.MediaHelpers.GetMediaImageUrl(Model.ApplicationSettings, taskTemplate.VideoThumbnail);
                            }
                            else
                            {
                                picture = @"/assets/img/normal_unavailable_image.png";
                            }
                        }
                    }

                    <div class="col-12 p-1">
                        <div class="p-1">
                            <div class="row" data-containertype="task_container" data-id="@taskTemplate.Id" data-index="@taskTemplate.Index">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-2">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <small>@(Model?.CmsLanguage?.GetValue(LanguageKeys.Task.IndexNrTitle, "Index nr.") ?? "Index nr.")</small><br />
                                            <strong style="text-wrap:none; font-size:20px;" data-container="index_display">@taskTemplate.Index</strong>
                                        </div>
                                        <div class="col-lg-6">
                                            <img src="/images/media-loading.gif" data-src="@picture" loading="lazy" class="img-fluid"  style="height:50px;" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-9 col-md-9 col-lg-9 col-xl-10">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <h5 class="mt-3 mt-sm-0">@taskTemplate.Name</h5>
                                            <p class="fs--1 mb-2 mb-md-2"><span class="badge badge-secondary">@taskTemplate.AreaPath</span></p>
                                        </div>
                                    </div>
                                    <!--div class="row">
                                        <div class="col-lg-12 d-flex justify-content-between flex-column">
                                            <div class="row checklistRow">
                                                <div class="col-md-6 col-lg-2 text-muted"><small>@(Model?.CmsLanguage?.GetValue(LanguageKeys.Task.TemplateId, "Id") ?? "Id"): <strong>@taskTemplate.Id</strong></small></div>
                                                <div class="col-md-6 col-lg-2 text-muted"><small>@(Model?.CmsLanguage?.GetValue(LanguageKeys.Task.TemplateRecurrenceTitle, "Recurrence") ?? "Recurrence"): <strong>@taskTemplate?.Recurrency?.RecurrencyType</strong></small></div>
                                            </div>
                                        </div>
                                    </div>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        }
    }
    else
    {
        <partial name="~/Views/Shared/_no_templates_message.cshtml" model="@Model" />
    }

</div>