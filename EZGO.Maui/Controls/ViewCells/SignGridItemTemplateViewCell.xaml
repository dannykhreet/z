<?xml version="1.0" encoding="utf-8" ?>
<Grid xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:buttons="clr-namespace:Syncfusion.Maui.Buttons;assembly=Syncfusion.Maui.Buttons"
             xmlns:controls="clr-namespace:EZGO.Maui.Controls"
             xmlns:classes="clr-namespace:EZGO.Maui.Classes"
             x:Name="SignItemTemplate"
             xmlns:images="clr-namespace:EZGO.Maui.Controls.Images"
             x:Class="EZGO.Maui.Controls.ViewCells.SignGridItemTemplateViewCell">
        <Grid.GestureRecognizers>
            <TapGestureRecognizer Tapped="SignItemTemplate_Clicked" Command="{Binding SaveStageCommand, Source={x:Reference SignItemTemplate}}" CommandParameter="{Binding .}"/>
        </Grid.GestureRecognizers>
        <Grid x:Name="NotYetSigned">
            <controls:CustomImage
                Aspect="AspectFill" IsLocalFile="True" ImageUrl="sign.jpeg" IsOpaque="True" />
            <BoxView
                x:Name="BackgroundBox"
                BackgroundColor="{StaticResource GreenColor}"
                Opacity="0.5">
                <BoxView.Triggers>
                    <DataTrigger
                        TargetType="BoxView"
                        Binding="{Binding IsSyncing, Source={x:Reference SignItemTemplate}}"
                        Value="True">
                        <Setter Property="BackgroundColor" Value="{StaticResource LightGreyColor}" />
                    </DataTrigger>
                </BoxView.Triggers>
            </BoxView>
            <Label
                x:Name="SignStageLabel" FontAttributes="Bold" FontSize="30" HorizontalTextAlignment="Center"
                Text="{classes:Translate SIGN_STAGE}"
                FontFamily="RobotoBold" TextColor="White" VerticalOptions="Center">
                <Label.Triggers>
                    <DataTrigger
                        TargetType="Label"
                        Binding="{Binding IsSyncing, Source={x:Reference SignItemTemplate}}"
                        Value="True">
                        <Setter Property="Text" Value="{classes:Translate SYNC_STATES_VIEW_SYNSING_MESSAGE}" />
                        <Setter Property="TextColor" Value="{StaticResource StageGreyColor}" />
                    </DataTrigger>
                </Label.Triggers>
            </Label>
        </Grid>
        <Grid x:Name="Signed">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.55*" />
                <RowDefinition Height="0.45*" />
            </Grid.RowDefinitions>
            <controls:CustomImage
                Grid.Row="0" Grid.RowSpan="2" IsLocalFile="True" Aspect="AspectFill" ImageUrl="sign.jpeg" IsOpaque="True" />
            <BoxView
                Grid.Row="0" Grid.RowSpan="2"
                BackgroundColor="{StaticResource DarkBlueColor}"
                Opacity="0.5" />
            <!-- Check icon -->
            <Label
                x:Name="CheckIcon" Grid.Column="0" VerticalOptions="Center" HorizontalOptions="Center" FontSize="55" FontFamily="FAR" Text="check"
                TextColor="{StaticResource GreenColor}" />           
            <Grid Grid.Row="1" BackgroundColor="{StaticResource WhiteColor}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.3*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <!-- Participant picture -->
                <StackLayout VerticalOptions="Center" Grid.Column="0" Orientation="Vertical" Spacing="0">
                    <images:RoundUserImage
                        x:Name="UserImage" />
                    <images:RoundUserImage
                        x:Name="UserImage2" IsVisible="False" Margin="0,-15,0,0" />
                </StackLayout>
                <StackLayout Grid.Column="1" VerticalOptions="Center">
                    <Label
                        x:Name="StageLabel"
                        TextColor="{StaticResource GreenColor}"
                        FontFamily="{StaticResource RobotoBold}" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="0.3*" />
                        </Grid.ColumnDefinitions>
                        <StackLayout Grid.Column="0">
                    <Label x:Name="DateLabel" />
                    <Label x:Name="SignedByLabel" FontFamily="{StaticResource RobotoBold}" />
                        </StackLayout>
                        <Image
                    x:Name="NotesIcon" IsVisible="False"
                    Grid.Column="1" HeightRequest="30" HorizontalOptions="Center" VerticalOptions="Center">
                    <Image.Source>
                        <FontImageSource
                            FontFamily="FAS" Glyph="calendar-lines-pen"
                            Color="{StaticResource GreenColor}" />
                    </Image.Source>
                </Image>
                    </Grid>
                </StackLayout>
            </Grid>
        </Grid>
    </Grid>
