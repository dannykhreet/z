<?xml version="1.0" encoding="UTF-8" ?>
<ViewCell
    x:Class="EZGO.Maui.Controls.ViewCells.CommentItemViewCell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:classes="clr-namespace:EZGO.Maui.Classes"
    xmlns:controls="clr-namespace:EZGO.Maui.Controls"
    xmlns:images="clr-namespace:EZGO.Maui.Controls.Images"
    x:Name="CommentViewCell">
    <ViewCell.View>
        <Grid StyleClass="bg-white">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--Image thumbnails-->  
            <images:ThumbnailGrid Grid.Column="0" Thumbnails="{Binding Attachments}" />

            <StackLayout
                Grid.Column="1"
                Padding="10,0,0,0"
                VerticalOptions="CenterAndExpand">
                <StackLayout.Triggers>
                    <!--When no images move all the content to the left-->  
                    <DataTrigger
                        Binding="{Binding HasAttachments}"
                        TargetType="StackLayout"
                        Value="False">
                        <Setter Property="Grid.Column" Value="0" />
                        <Setter Property="Grid.ColumnSpan" Value="2" />
                        <Setter Property="Padding" Value="15,0,0,0" />
                    </DataTrigger>
                </StackLayout.Triggers>

                <Label
                    FontSize="Medium"
                    MaxLines="2"
                    Text="{Binding CommentText}" />

                <StackLayout Orientation="Vertical">

                    <StackLayout Orientation="Horizontal">

                        <!--Comment text-->  
                        <Label FontFamily="{StaticResource RobotoLight}" Text="{classes:Translate COMMENT_CREATED_ON}" />

                        <!--Date and author-->  
                        <Label FontFamily="{StaticResource RobotoLight}">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="{Binding LocalCommentDate, Converter={StaticResource DateToStringConverter}}" />
                                    <Span Text=" " />
                                    <Span Text="{Binding CreatedBy}" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>

                    </StackLayout>

                    <!--Tag list--> 
                    <ScrollView
                        Grid.Column="1"
                        Grid.Row="0"
                        IsVisible="{Binding ContainsTags}"
                        HorizontalScrollBarVisibility="Never"
                        Orientation="Horizontal">
                            <controls:TagList
                                Wrap="NoWrap"
                                Margin="0,0,0,0"
                                BindableLayout.ItemsSource="{Binding Tags}" />
                    </ScrollView>

                </StackLayout>
            </StackLayout>

        </Grid>
    </ViewCell.View>
</ViewCell>
